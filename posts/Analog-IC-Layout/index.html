<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Analog Ic Layout" /><meta property="og:locale" content="en" /><meta name="description" content="Python: Analog Inverter Chip Layout with Magic and PySpice Simulation on Sky 130nm PDK" /><meta property="og:description" content="Python: Analog Inverter Chip Layout with Magic and PySpice Simulation on Sky 130nm PDK" /><link rel="canonical" href="https://snitgit.github.io/posts/Analog-IC-Layout/" /><meta property="og:url" content="https://snitgit.github.io/posts/Analog-IC-Layout/" /><meta property="og:site_name" content="Extreme Tools for Science and Engineering Discovery" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-10-10T00:00:00+07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Analog Ic Layout" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-10-10T00:00:00+07:00","datePublished":"2022-10-10T00:00:00+07:00","description":"Python: Analog Inverter Chip Layout with Magic and PySpice Simulation on Sky 130nm PDK","headline":"Analog Ic Layout","mainEntityOfPage":{"@type":"WebPage","@id":"https://snitgit.github.io/posts/Analog-IC-Layout/"},"url":"https://snitgit.github.io/posts/Analog-IC-Layout/"}</script><title>Analog Ic Layout | Extreme Tools for Science and Engineering Discovery</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Extreme Tools for Science and Engineering Discovery"><meta name="application-name" content="Extreme Tools for Science and Engineering Discovery"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> </a></div><div class="site-title mt-3"> <a href="/">Extreme Tools for Science and Engineering Discovery</a></div><div class="site-subtitle font-italic">Welcome Faculty Visit</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/snitgit" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['snit.san','mahidol...'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Analog Ic Layout</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Analog Ic Layout</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1665334800" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Oct 10, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/username">SNIT SANGHLAO</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="880 words"> <em>4 min</em> read</span></div></div></div><div class="post-content"><h1 id="python-analog-inverter-chip-layout-with-magic-and-pyspice-simulation-on-sky-130nm-pdk">Python: Analog Inverter Chip Layout with Magic and PySpice Simulation on Sky 130nm PDK</h1><p>This notebook demo how to create inverter loayout and extract analog net-list to simulate with <strong>Sky 130 nm PDK</strong>. Assume you are login to any compute node in exascale.mahidol.ac.th <strong>AI/HPC cluster</strong>.</p><p>Considering CHIP, ASIC shortage after Covide-19, Euro WAR and Taiwan-China security and political issue. They are looking for Plan B, alternative CHIP factory. It is not goal to change country business focus but motivation for new generation to want to explore HOW TO BUID REAL CHIP as Electronics HOBBY, ASIC tape out from OpenSource EDA tools.</p><h2 id="install-conda-and-packages-before-load-this-jupter-notebook"><span class="mr-2">Install Conda and packages before load this Jupter Notebook</span><a href="#install-conda-and-packages-before-load-this-jupter-notebook" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>$ conda create –name chipReal $ vi environment.yml channels:</p><ul><li>litex-hub<li>conda-forge dependencies:<li>open_pdks.sky130a<li>magic<li>ngspice-lib<li>gdstk<li>python<li>pip<li>pip:<ul><li>cairosvg<li>pyspice</ul></ul><p>Update conda environment: $ conda env update –file environment.yml</p><p>PDK_ROOT=/home/snit.san/miniconda3/envs/chipReal/share/pdk PDK_PATH=/home/snit.san/miniconda3/envs/chipReal/share/pdk/sky130A</p><p>Update PDK environment as your context.</p><h2 id="draw-a-mosfet-layout-with-magic"><span class="mr-2">Draw a MOSFET Layout with magic</span><a href="#draw-a-mosfet-layout-with-magic" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="o">%%</span><span class="n">script</span> <span class="n">bash</span> <span class="o">-</span><span class="n">c</span> <span class="s">"PDK_ROOT=/home/snit.san/miniconda3/envs/chipReal/share/pdk/ PDKPATH=/home/snit.san/miniconda3/envs/chipReal/share/pdk/sky130A magic -dnull -noconsole -rcfile /home/snit.san/miniconda3/envs/chipReal/share/pdk/sky130A/libs.tech/magic/sky130A.magicrc"</span>
<span class="n">cellname</span> <span class="n">rename</span> <span class="p">(</span><span class="n">UNNAMED</span><span class="p">)</span> <span class="n">mosfet</span>

<span class="n">box</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">950</span><span class="n">nm</span> <span class="mi">650</span><span class="n">nm</span>
<span class="n">paint</span> <span class="n">ndiffusion</span>

<span class="n">box</span> <span class="mi">400</span><span class="n">nm</span> <span class="o">-</span><span class="mi">600</span><span class="n">nm</span> <span class="mi">550</span><span class="n">nm</span> <span class="mi">1200</span><span class="n">nm</span>
<span class="n">paint</span> <span class="n">polysilicon</span>

<span class="n">box</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">400</span><span class="n">nm</span> <span class="mi">650</span><span class="n">nm</span>
<span class="n">label</span> <span class="n">source</span>
<span class="n">port</span> <span class="n">make</span> <span class="mi">3</span>

<span class="n">box</span> <span class="mi">550</span><span class="n">nm</span> <span class="mi">0</span> <span class="mi">950</span><span class="n">nm</span> <span class="mi">650</span><span class="n">nm</span>
<span class="n">label</span> <span class="n">drain</span>
<span class="n">port</span> <span class="n">make</span> <span class="mi">1</span>

<span class="n">box</span> <span class="mi">400</span><span class="n">nm</span> <span class="o">-</span><span class="mi">600</span><span class="n">nm</span> <span class="mi">550</span><span class="n">nm</span> <span class="mi">0</span>
<span class="n">label</span> <span class="n">gate</span>
<span class="n">port</span> <span class="n">make</span> <span class="mi">2</span>

<span class="n">extract</span>
<span class="n">ext2spice</span> <span class="n">lvs</span>
<span class="n">ext2spice</span> <span class="n">cthresh</span> <span class="mi">0</span>
<span class="n">ext2spice</span>

<span class="n">gds</span> <span class="n">labels</span> <span class="n">no</span>
<span class="n">gds</span> <span class="n">write</span> <span class="n">mosfet</span><span class="p">.</span><span class="n">gds</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre><td class="rouge-code"><pre>Magic 8.3 revision 329 - Compiled on Sat Oct  8 23:33:28 UTC 2022.
Starting magic under Tcl interpreter
Using the terminal as the console.
Using NULL graphics device.
Processing system .magicrc file
Sourcing design .magicrc for technology sky130A ...
2 Magic internal units = 1 Lambda
Input style sky130(vendor): scaleFactor=2, multiplier=2
The following types are not handled by extraction and will be treated as non-electrical types:
    ubm 
Scaled tech values by 2 / 1 to match internal grid scaling
Loading sky130A Device Generator Menu ...
Using technology "sky130A", version 1.0.341-2-gde752ec
Root cell box:
           width x height  (   llx,  lly  ), (   urx,  ury  )  area (units^2)

microns:   0.950 x 0.650   ( 0.000,  0.000), ( 0.950,  0.650)  0.618     
lambda:    95.00 x 65.00   (  0.00,  0.00 ), ( 95.00,  65.00)  6175.00   
internal:    190 x 130     (     0,  0    ), (   190,  130  )  24700     
Root cell box:
           width x height  (   llx,  lly  ), (   urx,  ury  )  area (units^2)

microns:   0.150 x 1.800   ( 0.400, -0.600), ( 0.550,  1.200)  0.270     
lambda:    15.00 x 180.00  ( 40.00, -60.00), ( 55.00,  120.00)  2700.00   
internal:     30 x 360     (    80, -120  ), (   110,  240  )  10800     
Root cell box:
           width x height  (   llx,  lly  ), (   urx,  ury  )  area (units^2)

microns:   0.400 x 0.650   ( 0.000,  0.000), ( 0.400,  0.650)  0.260     
lambda:    40.00 x 65.00   (  0.00,  0.00 ), ( 40.00,  65.00)  2600.00   
internal:     80 x 130     (     0,  0    ), (    80,  130  )  10400     
Moving label "source" from space to ndiff in cell mosfet.
Root cell box:
           width x height  (   llx,  lly  ), (   urx,  ury  )  area (units^2)

microns:   0.400 x 0.650   ( 0.550,  0.000), ( 0.950,  0.650)  0.260     
lambda:    40.00 x 65.00   ( 55.00,  0.00 ), ( 95.00,  65.00)  2600.00   
internal:     80 x 130     (   110,  0    ), (   190,  130  )  10400     
Moving label "drain" from space to ndiff in cell mosfet.
Root cell box:
           width x height  (   llx,  lly  ), (   urx,  ury  )  area (units^2)

microns:   0.150 x 0.600   ( 0.400, -0.600), ( 0.550,  0.000)  0.090     
lambda:    15.00 x 60.00   ( 40.00, -60.00), ( 55.00,  0.00 )  900.00    
internal:     30 x 120     (    80, -120  ), (   110,  0    )  3600      
Moving label "gate" from space to poly in cell mosfet.
Extracting mosfet into mosfet.ext:
exttospice finished.
   Generating output for cell mosfet
</pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">gdstk</span>
<span class="kn">import</span> <span class="nn">cairosvg</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="n">library</span> <span class="o">=</span> <span class="n">gdstk</span><span class="p">.</span><span class="n">read_gds</span><span class="p">(</span><span class="s">'mosfet.gds'</span><span class="p">)</span>
<span class="n">top_cells</span> <span class="o">=</span> <span class="n">library</span><span class="p">.</span><span class="n">top_level</span><span class="p">()</span>
<span class="n">top_cells</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">write_svg</span><span class="p">(</span><span class="s">'mosfet.svg'</span><span class="p">)</span>
<span class="n">cairosvg</span><span class="p">.</span><span class="n">svg2png</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s">'mosfet.svg'</span><span class="p">,</span> <span class="n">write_to</span><span class="o">=</span><span class="s">'mosfet.png'</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
<span class="n">Image</span><span class="p">(</span><span class="s">'mosfet.png'</span><span class="p">)</span>
</pre></table></code></div></div><p><img data-src="/assets/notebooks/2022-10-10-Analog-IC-Layout_files/2022-10-10-Analog-IC-Layout_9_0.png" alt="Jupyter Notebook Plot" data-proofer-ignore></p><h2 id="simulate-the-mofset-with-pyspice"><span class="mr-2">Simulate the MOFSET with PySpice</span><a href="#simulate-the-mofset-with-pyspice" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="nn">PySpice.Spice.Netlist</span> <span class="kn">import</span> <span class="n">Circuit</span><span class="p">,</span> <span class="n">SubCircuit</span><span class="p">,</span> <span class="n">SubCircuitFactory</span>
<span class="kn">from</span> <span class="nn">PySpice.Unit</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="n">circuit</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">(</span><span class="s">'mosfet0'</span><span class="p">)</span>
<span class="n">circuit</span><span class="p">.</span><span class="n">lib</span><span class="p">(</span><span class="s">'/home/snit.san/miniconda3/envs/chipReal/share/pdk/sky130A/libs.tech/ngspice/sky130.lib.spice'</span><span class="p">,</span> <span class="s">'tt'</span><span class="p">)</span>
<span class="n">circuit</span><span class="p">.</span><span class="n">include</span><span class="p">(</span><span class="s">'mosfet.spice'</span><span class="p">)</span>
<span class="n">circuit</span><span class="p">.</span><span class="n">X</span><span class="p">(</span><span class="s">'mosfet0'</span><span class="p">,</span> <span class="s">'mosfet'</span><span class="p">,</span> <span class="s">'DRAIN'</span><span class="p">,</span> <span class="s">'GATE'</span><span class="p">,</span> <span class="s">'VGND'</span><span class="p">)</span>
<span class="n">circuit</span><span class="p">.</span><span class="n">V</span><span class="p">(</span><span class="s">'gnd'</span><span class="p">,</span> <span class="s">'VGND'</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">circuit</span><span class="p">.</span><span class="n">V</span><span class="p">(</span><span class="s">'dd'</span><span class="p">,</span> <span class="s">'VPWR'</span><span class="p">,</span> <span class="s">'VGND'</span><span class="p">,</span> <span class="mf">1.8</span><span class="p">)</span>
<span class="n">circuit</span><span class="p">.</span><span class="n">R</span><span class="p">(</span><span class="s">''</span><span class="p">,</span> <span class="s">'VPWR'</span><span class="p">,</span> <span class="s">'DRAIN'</span><span class="p">,</span> <span class="s">'10k'</span><span class="p">)</span>
<span class="n">circuit</span><span class="p">.</span><span class="n">PulseVoltageSource</span><span class="p">(</span><span class="s">'Vin'</span><span class="p">,</span> <span class="s">'GATE'</span><span class="p">,</span> <span class="s">'VGND'</span><span class="p">,</span>
                           <span class="n">initial_value</span><span class="o">=</span><span class="mi">0</span><span class="o">@</span><span class="n">u_V</span><span class="p">,</span> <span class="n">pulsed_value</span><span class="o">=</span><span class="mf">1.8</span><span class="o">@</span><span class="n">u_V</span><span class="p">,</span>
                           <span class="n">rise_time</span><span class="o">=</span><span class="mi">10</span><span class="o">@</span><span class="n">u_ps</span><span class="p">,</span> <span class="n">fall_time</span><span class="o">=</span><span class="mi">10</span><span class="o">@</span><span class="n">u_ps</span><span class="p">,</span>
                           <span class="n">pulse_width</span><span class="o">=</span><span class="mi">1</span><span class="o">@</span><span class="n">u_ns</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">2</span><span class="o">@</span><span class="n">u_ns</span><span class="p">,</span> <span class="n">delay_time</span><span class="o">=</span><span class="mi">1</span><span class="o">@</span><span class="n">u_ns</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">circuit</span><span class="p">))</span>
<span class="n">simulator</span> <span class="o">=</span> <span class="n">circuit</span><span class="p">.</span><span class="n">simulator</span><span class="p">()</span>
<span class="n">analysis</span> <span class="o">=</span> <span class="n">simulator</span><span class="p">.</span><span class="n">transient</span><span class="p">(</span><span class="n">step_time</span><span class="o">=</span><span class="mi">10</span><span class="o">@</span><span class="n">u_ps</span><span class="p">,</span> <span class="n">end_time</span><span class="o">=</span><span class="mi">2</span><span class="o">@</span><span class="n">u_ns</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'done'</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'mosfet'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'time in 1e-14s'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'voltage in V'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">analysis</span><span class="p">.</span><span class="n">GATE</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">analysis</span><span class="p">.</span><span class="n">DRAIN</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">legend</span><span class="p">((</span><span class="s">'GATE'</span><span class="p">,</span> <span class="s">'DRAIN'</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>.title mosfet0
.include /home/snit.san/chip_design_tape_out/analog_sim/mosfet.spice
.lib /home/snit.san/miniconda3/envs/chipReal/share/pdk/sky130A/libs.tech/ngspice/sky130.lib.spice tt
Xmosfet0 DRAIN GATE VGND mosfet
Vgnd VGND 0 0
Vdd VPWR VGND 1.8
R VPWR DRAIN 10k
VVin GATE VGND DC 0V PULSE(0V 1.8V 1ns 10ps 10ps 1ns 2ns)

done
</pre></table></code></div></div><p><img data-src="/assets/notebooks/2022-10-10-Analog-IC-Layout_files/2022-10-10-Analog-IC-Layout_11_1.png" alt="Jupyter Notebook Plot" data-proofer-ignore></p><p>References/Sources:</p><ol><li>Digital inverter with OpenLane https://developers.google.com/silicon/guides/digital-inverter-openlane</ol></div><div class="post-tail-wrapper text-muted"><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Analog+Ic+Layout+-+Extreme+Tools+for+Science+and+Engineering+Discovery&url=https%3A%2F%2Fsnitgit.github.io%2Fposts%2FAnalog-IC-Layout%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Analog+Ic+Layout+-+Extreme+Tools+for+Science+and+Engineering+Discovery&u=https%3A%2F%2Fsnitgit.github.io%2Fposts%2FAnalog-IC-Layout%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fsnitgit.github.io%2Fposts%2FAnalog-IC-Layout%2F&text=Analog+Ic+Layout+-+Extreme+Tools+for+Science+and+Engineering+Discovery" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Tensor_network_in_Quantum_Information_Science_Engineering_Physics/">Tensor_network_in_quantum_information_science_engineering_physics</a><li><a href="/posts/Quantum-Drug-Discovery/">Quantum Drug Discovery</a><li><a href="/posts/CPU_RISC_V_Layout_multi_university_wafer/">Cpu_risc_v_layout_multi_university_wafer</a><li><a href="/posts/Reproducible-slurm-notebook/"> Reproducible Slurm Notebook</a><li><a href="/posts/Quantum-Exspesso/">Quantum ESPRESSO on exascale.mahidol.ac.th Multi-Node-Multi-GPUs MNMG Testing</a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Tensor_network_in_Quantum_Information_Science_Engineering_Physics/"><div class="card-body"> <em class="small" data-ts="1669741200" data-df="ll" > Nov 30, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Tensor_network_in_quantum_information_science_engineering_physics</h3><div class="text-muted small"><p> Unify Quantum Information Science and Quantum Machine Learning with Quantum Tensor Networks as modern diagrammatic reasoning on GPUs Cluster Boring and waiting for NVIDIA cuQuantum appliance for m...</p></div></div></a></div><div class="card"> <a href="/posts/Quantum-Drug-Discovery/"><div class="card-body"> <em class="small" data-ts="1668618000" data-df="ll" > Nov 17, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Quantum Drug Discovery</h3><div class="text-muted small"><p> Drug Discovery: Protein Folding on IBM’s Qiskit Quantum Information Framework : NVIDIA A100 exascale.mahidol.ac.th Before Covid-19 there is shown of obstacles for Quantum Supremacy[7]. December 20...</p></div></div></a></div><div class="card"> <a href="/posts/CPU_RISC_V_Layout_multi_university_wafer/"><div class="card-body"> <em class="small" data-ts="1665680400" data-df="ll" > Oct 14, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Cpu_risc_v_layout_multi_university_wafer</h3><div class="text-muted small"><p> Chip RISC V CPU: Physical tape out in a Jupyter notebook on ExamScale Cluster Motivated by difficulty experiences in IC Design about 18 and 8 years ago, this note will save time and resource for ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Monai_mednist_tutorial/" class="btn btn-outline-primary" prompt="Older"><p>Monai_mednist_tutorial</p></a> <a href="/posts/CPU_RISC_V_Layout_multi_university_wafer/" class="btn btn-outline-primary" prompt="Newer"><p>Cpu_risc_v_layout_multi_university_wafer</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/username">SNIT SANGHLAO</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
